%Register
%Adressierung
\section{Architektur}
X86-Assembler umfasst eine Instruktionsmenge die ursprünglich für Intels 8086 CPU konzipiert war. Diese basiert auf einer "von Neumann"-Architektur. Hier wird, im Gegensatz zur Harvard-Architektur, für Daten und Programme der gleiche Speicher verwendet. Es existierte ein fester Registersatz von 16 Registern der sich im Laufe der Zeit immer weiter vergrößert hat. Ursprünglich hatte x86 vier general-purpose Register (AX, BX, CX und DX), vier Segmentregister zur Speicheradressierung (CS, DS, ES und SS), vier Indexregistern (SP, BP, SI, DI), sowie dem FLAG-Register und dem Instruktionszeiger-Register.

Der Registersatz wurde im Laufe der Zeit mit jeder neuen Prozessorgenerationen erweitert. Wichtigster Schritt war dabei die Einführung von 32-Bit Registern mit dem 80386. Alle 16-bit Grundregister mit Ausnahme der Segmentregister wurden auf 32-Bit erweitert und mit dem Präfix E versehen.

\subsection{Prozessor-Register}

Register der Intel-Prozessoren mit 32 Bit Instruktionssatz

\subsubsection{Allzweckregister}

\begin{tabular}{|c|l|l|}
\hline EAX & \emph{accumulator} & AX, AH, AL
\\
\hline EBX & \emph{base register} & BX, BH, BL
\\
\hline ECX & \emph{counter register} & BX, CH, CL
\\
\hline EDX & \emph{data register} & DX, DH, DL
\\
\hline \end{tabular}

Auch Rechenregister

32 Bit Breite – ein Prozessor \emph{word}

unteren Word kann unter alten 16-bit Namen ohne E-Präfix angesprochen werden

unteres Wort kann jeweils als zwei 8-Bit-breite Register angesprochen werden (z.b.AH, AL).

Manipulation der Daten mit denen der Prozessor rechnet

erfüllen spezielle Aufgaben

Rechenoperationen können aber auf alle vier Register angewendet werden

EAX erhält meist den Rückgabewert bei Funktionsaufrufen



\subsubsection{Segmentregister und Adressierung}

\begin{tabular}{|c|c|}
\hline CS & Codesegment \\
\hline DS & Datensegment \\
\hline SS & Stacksegment \\
\hline ES & Extrasegment\\
\hline
\end{tabular}

Die Segmentregister nehmen Anfangsadressen von Segmenten im Speicher auf.

16 Bit breit, lassen sich nicht in aufteilen

lassen sich lediglich auslesen und beschreiben

Besonders relevant für segmentierte adressierung im \emph{Real Mode} um über statt 16 Bit
zur Adressierung, 20 Bit zu verfügen

\subsubsection{Zeige- und Indexregister}

\begin{tabular}{|c|l|}
\hline ESI & \emph{source index} \\
\hline EDI & \emph{destination index} \\
\hline
\end{tabular}

Nützlich als Zeiger auf Datenstrukturen

z.B. String-Manipulation


\begin{tabular}{|c|l|}
\hline ESP & \emph{stack pointer}\\
\hline EBP & \emph{base pointer} \\
\hline
\end{tabular}

Zeiger für den Stack

ESP und EBP dienen zum Aufspannen eines Stackframes bei Funktionsaufrufen

ESP zeigt auf den aktuellen \emph{top}

EBP zeigt auf den \emph{bottom}

\begin{tabular}{|c|l|}
\hline EIP & \emph{instruction pointer} \\
\hline
\end{tabular}

Zeiger auf den nächsten Befehl in der Ausführung

wird ausschließlich intern durch den Prozessor verändert.

\subsubsection{Statusregister}

Ein 16 Bit Flag-Register FLAGS

32 Bit EFLAGS erhält einige weitere Flags

{\small 15}
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline & & & & O & D & I & T & S & Z & & A & & P & & C \\
\hline
\end{tabular}
{\small 0}

\emph{overflow, direction, interrupt, trap, sign, zero, auxiliary, parity}
und \emph{carry flag} 

nehmen bestimmte Belegung nach verschiedenen Operationen ein

beeinflussen bestimmte Entscheidungen wie z.B. bedingte Sprünge (\emph{zero flag})


\subsection{Adressraum}

\subsubsection{Real Mode}

16 bit Mode, seit 8086

Segmentregister (CS, DS, SS, ES) sind relevant für segmentierte Adressierung im
\emph{Real Mode} um über statt 16 Bit zur Adressierung, 20 Bit zu verfügen

$Adresse = 16 * Segment + Offset$

Dies erhöht den Adressraum von 64 KByte auf 1 MByte.


\subsubsection{Protected Mode}
Im \emph{protected mode} mit 32-Bit Adressierung werden alle 16-Bit auf 32-Bit erweitert

\texttt{SEGMENT:OFFSET} Adressierung ist ebenfalls möglich, aber weniger relevant als im
\emph{Real Mode}, da nun volle $2^{32}$-Bit (4 GByte) adressiert werden können




Arten der Adressierung:

\begin{enumerate}
\item Direktwertadressierung (Immediates)
\item Direkte Adressierung
\item Indirekte Registeradressierung
\item Indizierte Registeradressierung
\end{enumerate}


% \section{Unterprogramme}
